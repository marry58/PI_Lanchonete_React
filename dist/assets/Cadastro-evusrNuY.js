import{aB as x,r as g,ad as e,aJ as j,aC as a}from"./vendor-C4YCU9L4.js";import{B as v}from"./button-wdJszIiX.js";import{I as i}from"./input-DTTsWnCS.js";import{L as o}from"./label-CrBnGp82.js";import{C,c as w,d as y,e as N,a as b}from"./card-DYq_ZU2g.js";import{s as p}from"./index-DLOkv6-d.js";import{b as E}from"./logoprincipal-CGgvGNiW.js";import"./supabase-i8UOGaJf.js";import"./radix-BdbzPyf5.js";import"./react-query-CMlviXwV.js";const _=()=>{const u=x(),[r,h]=g.useState({name:"",email:"",password:"",confirmPassword:"",cpf:"",cep:"",unidade:"",nasc:""}),s=n=>{h({...r,[n.target.id]:n.target.value})},f=async n=>{var d;if(n.preventDefault(),!r.name.trim()){a.error("Nome é obrigatório.");return}if(!r.email.trim()){a.error("E-mail é obrigatório.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){a.error("E-mail inválido.");return}if(!r.password){a.error("Senha é obrigatória.");return}if(r.password.length<6){a.error("A senha precisa ter pelo menos 6 caracteres.");return}if(!r.confirmPassword){a.error("Confirme sua senha.");return}if(r.password!==r.confirmPassword){a.error("As senhas não coincidem.");return}try{const{data:t,error:l}=await p.auth.signUp({email:r.email,password:r.password,options:{data:{full_name:r.name,role:"client"},emailRedirectTo:"http://localhost:5173/login"}});if(l){a.error(l.message);return}const c=(d=t.user)==null?void 0:d.id;if(!c){a.error("Erro ao obter ID do usuário.");return}const{error:m}=await p.from("usuario").insert({auth_user_id:c,nome:r.name,email:r.email,cpf:r.cpf,cep:r.cep,unidade:r.unidade,nasc:r.nasc});if(m){console.log(m),a.error("Erro ao salvar dados no banco.");return}a.success("Cadastro realizado! Verifique seu e-mail."),u("/login")}catch(t){console.log(t),a.error("Erro inesperado ao cadastrar")}};return e.jsx("div",{className:"fixed inset-0 bg-[#ffffff8c] overflow-hidden w-full h-full flex items-center justify-center",style:{backgroundImage:`url(${E})`,backgroundSize:"cover",backgroundPosition:"top"},children:e.jsxs(C,{className:"w-full max-w-md",children:[e.jsxs(w,{className:"space-y-1",children:[e.jsx(y,{className:"text-2xl font-bold text-center",children:"Cadastrar"}),e.jsx(N,{className:"text-center",children:"Crie sua conta para fazer pedidos"})]}),e.jsxs(b,{children:[e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Nome completo"}),e.jsx(i,{id:"name",placeholder:"Seu nome",value:r.name,onChange:s,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",type:"email",placeholder:"seu@email.com",value:r.email,onChange:s,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password",children:"Senha"}),e.jsx(i,{id:"password",type:"password",placeholder:"••••••••",value:r.password,onChange:s,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"confirmPassword",children:"Confirmar senha"}),e.jsx(i,{id:"confirmPassword",type:"password",placeholder:"••••••••",value:r.confirmPassword,onChange:s,required:!0})]}),e.jsxs("div",{className:"space-y-2 grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"cpf",children:"CPF"}),e.jsx(i,{id:"cpf",placeholder:"000.000.000-00",value:r.cpf,onChange:s})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"cep",children:"CEP"}),e.jsx(i,{id:"cep",placeholder:"00000-000",value:r.cep,onChange:s})]})]}),e.jsxs("div",{className:"space-y-2 grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"unidade",children:"Unidade"}),e.jsx(i,{id:"unidade",placeholder:"Loja/Filial",value:r.unidade,onChange:s})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nasc",children:"Data de nascimento"}),e.jsx(i,{id:"nasc",type:"date",value:r.nasc,onChange:s})]})]}),e.jsx(v,{type:"submit",className:"w-full",children:"Cadastrar"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Já tem uma conta?"," ",e.jsx(j,{to:"/login",className:"text-primary hover:underline font-medium",children:"Entrar"})]})]})]})})};export{_ as default};
