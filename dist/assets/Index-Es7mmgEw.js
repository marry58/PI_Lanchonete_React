import{ad as e,aH as v,r as t,aI as w,aC as m}from"./vendor-C4YCU9L4.js";import{H as y}from"./Header-2VjGWnYo.js";import{B as P}from"./button-wdJszIiX.js";import{C as S,a as T,b as E}from"./card-DYq_ZU2g.js";import{I as F}from"./input-DTTsWnCS.js";import{T as B,a as I,b as L,c as A}from"./tabs-Cbmpagbj.js";import{s as x}from"./index-DLOkv6-d.js";import"./supabase-i8UOGaJf.js";import"./radix-BdbzPyf5.js";import"./react-query-CMlviXwV.js";const R="/assets/logos-Footer-sistema-fecomercio-sesc-senac-DjFKkdBX.png",k=()=>e.jsx("footer",{className:"bg-white border-t",children:e.jsx("div",{className:"container flex items-center justify-center",children:e.jsx("img",{src:R,alt:"Fecomércio PR, Sesc, Senac e IFPD",className:" object-contain"})})}),H=({name:a,description:i,price:c,image:n,onAddToCart:o})=>e.jsxs(S,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"aspect-square overflow-hidden bg-muted",children:e.jsx("img",{src:n,alt:a,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"})}),e.jsxs(T,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:a}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:i}),e.jsxs("p",{className:"text-primary font-bold text-xl",children:["R$ ",c.toFixed(2)]})]}),e.jsx(E,{className:"p-4 pt-0",children:e.jsxs(P,{className:"w-full",onClick:o,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Adicionar"]})})]});console.log("Supabase URL:",x.supabaseUrl);const J=()=>{const[a,i]=t.useState(""),[c,n]=t.useState([]),[o,p]=t.useState(["todos"]),[f,h]=t.useState(!0),j=async()=>{const{data:s,error:r}=await x.from("produtos").select(`
      id,
      nome,
      descricao,
      preco,
      imagem,
      categoria_id,
      categorias (
        id,
        nomeCategoria
      )
    `);return r?(console.error("Erro ao buscar produtos:",r),m.error("Erro ao carregar produtos!"),[]):s};t.useEffect(()=>{(async()=>{try{const r=await j();n(r);const u=r.map(N=>{var g;return((g=N.categorias)==null?void 0:g.nomeCategoria)||"sem categoria"}),l=["todos",...new Set(u)];p(l)}catch(r){console.error("Erro ao carregar produtos:",r),m.error("Erro ao carregar produtos!")}finally{h(!1)}})()},[]);const d=c.filter(s=>s.nome.toLowerCase().includes(a.toLowerCase())),b=s=>s==="todos"?d:d.filter(r=>{var l;return(((l=r.categorias)==null?void 0:l.nomeCategoria)||"sem categoria")===s}),C=s=>{m.success(`${s} adicionado ao carrinho!`)};return f?e.jsx("p",{className:"text-center mt-20",children:"Carregando..."}):(console.log("Produtos carregados:",c),console.log("Categorias disponíveis:",o),console.log("Produtos filtrados:",d),e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(y,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8 flex-1 w-full",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Cardápio"}),e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-5 w-5"}),e.jsx(F,{type:"text",placeholder:"Buscar produtos...",value:a,onChange:s=>i(s.target.value),className:"pl-10"})]})]}),e.jsxs(B,{defaultValue:"todos",className:"w-full",children:[e.jsx(I,{className:"mb-8",children:o.map(s=>e.jsx(L,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),o.map(s=>e.jsx(A,{value:s,children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:b(s).map(r=>e.jsx(H,{name:r.nome,description:r.descricao||"",price:Number(r.preco)||0,image:r.imagem,onAddToCart:()=>C(r.nome)},r.id))})},s))]})]}),e.jsx(k,{})]}))};export{J as default};
