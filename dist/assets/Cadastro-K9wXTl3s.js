import{aB as x,r as g,ad as e,aD as j,aC as r}from"./vendor-WvxInmkI.js";import{C as v,c as C,d as w,e as y,a as N,L as i,I as o,B as b,s as u}from"./index-BInAVXNB.js";import{b as E}from"./logoprincipal-CGgvGNiW.js";import"./supabase-DuVauSO6.js";import"./radix-BvlS9Eci.js";import"./react-query-D1LWqImO.js";const L=()=>{const p=x(),[a,h]=g.useState({name:"",email:"",password:"",confirmPassword:"",cpf:"",cep:"",unidade:"",nasc:""}),s=n=>{h({...a,[n.target.id]:n.target.value})},f=async n=>{var d;if(n.preventDefault(),!a.name.trim()){r.error("Nome é obrigatório.");return}if(!a.email.trim()){r.error("E-mail é obrigatório.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)){r.error("E-mail inválido.");return}if(!a.password){r.error("Senha é obrigatória.");return}if(a.password.length<6){r.error("A senha precisa ter pelo menos 6 caracteres.");return}if(!a.confirmPassword){r.error("Confirme sua senha.");return}if(a.password!==a.confirmPassword){r.error("As senhas não coincidem.");return}try{const{data:t,error:l}=await u.auth.signUp({email:a.email,password:a.password,options:{data:{full_name:a.name,role:"client"},emailRedirectTo:"http://localhost:5173/login"}});if(l){r.error(l.message);return}const c=(d=t.user)==null?void 0:d.id;if(!c){r.error("Erro ao obter ID do usuário.");return}const{error:m}=await u.from("usuario").insert({auth_user_id:c,nome:a.name,email:a.email,cpf:a.cpf,cep:a.cep,unidade:a.unidade,nasc:a.nasc});if(m){console.log(m),r.error("Erro ao salvar dados no banco.");return}r.success("Cadastro realizado! Verifique seu e-mail."),p("/login")}catch(t){console.log(t),r.error("Erro inesperado ao cadastrar")}};return e.jsx("div",{className:"fixed inset-0 bg-[#ffffff8c] overflow-hidden w-full h-full flex items-center justify-center",style:{backgroundImage:`url(${E})`,backgroundSize:"cover",backgroundPosition:"top"},children:e.jsxs(v,{className:"w-full max-w-md",children:[e.jsxs(C,{className:"space-y-1",children:[e.jsx(w,{className:"text-2xl font-bold text-center",children:"Cadastrar"}),e.jsx(y,{className:"text-center",children:"Crie sua conta para fazer pedidos"})]}),e.jsxs(N,{children:[e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",children:"Nome completo"}),e.jsx(o,{id:"name",placeholder:"Seu nome",value:a.name,onChange:s,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",type:"email",placeholder:"seu@email.com",value:a.email,onChange:s,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"password",children:"Senha"}),e.jsx(o,{id:"password",type:"password",placeholder:"••••••••",value:a.password,onChange:s,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"confirmPassword",children:"Confirmar senha"}),e.jsx(o,{id:"confirmPassword",type:"password",placeholder:"••••••••",value:a.confirmPassword,onChange:s,required:!0})]}),e.jsxs("div",{className:"space-y-2 grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"cpf",children:"CPF"}),e.jsx(o,{id:"cpf",placeholder:"000.000.000-00",value:a.cpf,onChange:s})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"cep",children:"CEP"}),e.jsx(o,{id:"cep",placeholder:"00000-000",value:a.cep,onChange:s})]})]}),e.jsxs("div",{className:"space-y-2 grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"unidade",children:"Unidade"}),e.jsx(o,{id:"unidade",placeholder:"Loja/Filial",value:a.unidade,onChange:s})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"nasc",children:"Data de nascimento"}),e.jsx(o,{id:"nasc",type:"date",value:a.nasc,onChange:s})]})]}),e.jsx(b,{type:"submit",className:"w-full",children:"Cadastrar"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Já tem uma conta?"," ",e.jsx(j,{to:"/login",className:"text-primary hover:underline font-medium",children:"Entrar"})]})]})]})})};export{L as default};
