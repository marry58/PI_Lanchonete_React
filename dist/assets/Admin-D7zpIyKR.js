import{r as i,ad as e,aC as d,aZ as ws,aE as Ve,a_ as He,a$ as Ps,b0 as Ss,b1 as Es,aS as Ke,aT as ks,b2 as Ue,aW as Xe}from"./vendor-WvxInmkI.js";import{f as O,s as w,H as Ls,C as S,c as D,d as F,a as E,e as B,B as N,L as h,I as y,T as oe,g as Ge}from"./index-BInAVXNB.js";import{T as Ds,a as Fs,b as ne,c as ie}from"./tabs-akv-j3gh.js";import{T as Me,a as Qe,b as de,c as j,d as We,e as p,S as X,f as G,g as M,h as Q,i as q}from"./select-BKYq4roj.js";import{D as W,a as Y,b as Z,c as J,d as ee,e as Ye,f as ce}from"./dialog-VvVZCG6g.js";import{R as le,T as Ts,L as Is,C as Ze,X as Je,Y as es,a as qs,P as Os,b as zs,c as Rs,B as As,d as $s}from"./charts-C4CIzXnO.js";import"./supabase-DuVauSO6.js";import"./radix-BvlS9Eci.js";import"./react-query-D1LWqImO.js";const Bs={light:"",dark:".dark"},ss=i.createContext(null);function as(){const r=i.useContext(ss);if(!r)throw new Error("useChart must be used within a <ChartContainer />");return r}const he=i.forwardRef(({id:r,className:o,children:c,config:m,...g},T)=>{const C=i.useId(),u=`chart-${r||C.replace(/:/g,"")}`;return e.jsx(ss.Provider,{value:{config:m},children:e.jsxs("div",{"data-chart":u,ref:T,className:O("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",o),...g,children:[e.jsx(Vs,{id:u,config:m}),e.jsx(le,{children:c})]})})});he.displayName="Chart";const Vs=({id:r,config:o})=>{const c=Object.entries(o).filter(([m,g])=>g.theme||g.color);return c.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(Bs).map(([m,g])=>`
${g} [data-chart=${r}] {
${c.map(([T,C])=>{var k;const u=((k=C.theme)==null?void 0:k[m])||C.color;return u?`  --color-${T}: ${u};`:null}).join(`
`)}
}
`).join(`
`)}}):null},ve=Ts,me=i.forwardRef(({active:r,payload:o,className:c,indicator:m="dot",hideLabel:g=!1,hideIndicator:T=!1,label:C,labelFormatter:u,labelClassName:k,formatter:_,color:V,nameKey:se,labelKey:H},f)=>{const{config:A}=as(),$=i.useMemo(()=>{var I;if(g||!(o!=null&&o.length))return null;const[l]=o,K=`${H||l.dataKey||l.name||"value"}`,b=Ne(A,l,K),v=!H&&typeof C=="string"?((I=A[C])==null?void 0:I.label)||C:b==null?void 0:b.label;return u?e.jsx("div",{className:O("font-medium",k),children:u(v,o)}):v?e.jsx("div",{className:O("font-medium",k),children:v}):null},[C,u,o,g,k,A,H]);if(!r||!(o!=null&&o.length))return null;const z=o.length===1&&m!=="dot";return e.jsxs("div",{ref:f,className:O("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",c),children:[z?null:$,e.jsx("div",{className:"grid gap-1.5",children:o.map((l,K)=>{const b=`${se||l.name||l.dataKey||"value"}`,v=Ne(A,l,b),I=V||l.payload.fill||l.color;return e.jsx("div",{className:O("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",m==="dot"&&"items-center"),children:_&&(l==null?void 0:l.value)!==void 0&&l.name?_(l.value,l.name,l,K,l.payload):e.jsxs(e.Fragment,{children:[v!=null&&v.icon?e.jsx(v.icon,{}):!T&&e.jsx("div",{className:O("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":m==="dot","w-1":m==="line","w-0 border-[1.5px] border-dashed bg-transparent":m==="dashed","my-0.5":z&&m==="dashed"}),style:{"--color-bg":I,"--color-border":I}}),e.jsxs("div",{className:O("flex flex-1 justify-between leading-none",z?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[z?$:null,e.jsx("span",{className:"text-muted-foreground",children:(v==null?void 0:v.label)||l.name})]}),l.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:l.value.toLocaleString()})]})]})},l.dataKey)})})]})});me.displayName="ChartTooltip";const Hs=i.forwardRef(({className:r,hideIcon:o=!1,payload:c,verticalAlign:m="bottom",nameKey:g},T)=>{const{config:C}=as();return c!=null&&c.length?e.jsx("div",{ref:T,className:O("flex items-center justify-center gap-4",m==="top"?"pb-3":"pt-3",r),children:c.map(u=>{const k=`${g||u.dataKey||"value"}`,_=Ne(C,u,k);return e.jsxs("div",{className:O("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[_!=null&&_.icon&&!o?e.jsx(_.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:u.color}}),_==null?void 0:_.label]},u.value)})}):null});Hs.displayName="ChartLegend";function Ne(r,o,c){if(typeof o!="object"||o===null)return;const m="payload"in o&&typeof o.payload=="object"&&o.payload!==null?o.payload:void 0;let g=c;return c in o&&typeof o[c]=="string"?g=o[c]:m&&c in m&&typeof m[c]=="string"&&(g=m[c]),g in r?r[g]:r[c]}const Js=()=>{var qe,Oe,ze,Re,Ae;const[r,o]=i.useState({nome:"",descricao:"",preco:"",categoria_id:null,lanchonete_id:null,imagem:"",disponivel:!0,estoque:0}),c=s=>{o({...r,[s.target.id]:s.target.value})},m=async s=>{var a,t;if(s.preventDefault(),!r.nome||!r.preco||!r.categoria_id||!r.lanchonete_id){d.error("Preencha nome, preço, categoria e lanchonete do produto!");return}try{const n={nome:r.nome,descricao:r.descricao,preco:parseFloat(r.preco),categoria_id:r.categoria_id,lanchonete_id:r.lanchonete_id,imagem:r.imagem,disponivel:r.disponivel,estoque:Number(r.estoque)||0},{error:R}=await w.from("produtos").insert(n);if(R){console.error(R),d.error("Erro ao adicionar produto.");return}d.success("Produto adicionado com sucesso!"),Se(!1),o({nome:"",descricao:"",preco:"",categoria_id:((a=P[0])==null?void 0:a.id)??null,lanchonete_id:((t=f[0])==null?void 0:t.id)??null,imagem:"",disponivel:!0,estoque:0}),l()}catch(n){console.error(n),d.error("Erro inesperado ao cadastrar produto.")}},g=async()=>{var s,a;if(!r.nome||!r.preco||!r.categoria_id||!r.lanchonete_id||!Ce){d.error("Preencha nome, preço, categoria e lanchonete do produto!");return}try{const{error:t}=await w.from("produtos").update({nome:r.nome,descricao:r.descricao,preco:parseFloat(r.preco),categoria_id:r.categoria_id,lanchonete_id:r.lanchonete_id,imagem:r.imagem,disponivel:r.disponivel,estoque:Number(r.estoque)||0}).eq("id",Ce.id);if(t){console.error(t),d.error("Erro ao atualizar produto.");return}d.success("Produto atualizado com sucesso!"),ge(!1),be(null),o({nome:"",descricao:"",preco:"",categoria_id:((s=P[0])==null?void 0:s.id)??null,lanchonete_id:((a=f[0])==null?void 0:a.id)??null,imagem:"",disponivel:!0,estoque:0}),l()}catch(t){console.error(t),d.error("Erro inesperado ao atualizar produto.")}},T=s=>{be(s),o({nome:s.nome,descricao:s.descricao,preco:s.preco.toString(),categoria_id:s.categoria_id,lanchonete_id:s.lanchonete_id,imagem:s.imagem,disponivel:s.disponivel,estoque:s.estoque??0}),ge(!0)},C=async s=>{try{const{error:a}=await w.from("produtos").delete().eq("id",s);if(a){console.error(a),d.error("Erro ao remover produto.");return}d.success("Produto removido!"),l()}catch(a){console.error(a),d.error("Erro inesperado ao remover produto.")}},[u,k]=i.useState([]),[_,V]=i.useState(!1),[se,H]=i.useState(""),[f,A]=i.useState([]),[$,z]=i.useState(!1),l=async()=>{V(!0);const{data:s,error:a}=await w.from("produtos").select("id, nome, descricao, preco, categoria_id, lanchonete_id, imagem, disponivel, estoque").order("id",{ascending:!0});if(a){console.error(a),d.error("Erro ao carregar produtos."),V(!1);return}const t=(s||[]).map(n=>({id:n.id,nome:n.nome,descricao:n.descricao,preco:Number(n.preco)||0,categoria_id:n.categoria_id,lanchonete_id:n.lanchonete_id,imagem:n.imagem,disponivel:n.disponivel??!0,estoque:Number(n.estoque)||0}));k(t),V(!1)},K=async()=>{z(!0);const{data:s,error:a}=await w.from("lanchonete").select("id, nome_lanchonete, endereco, status").order("nome_lanchonete",{ascending:!0});if(a){console.error(a),d.error("Erro ao carregar lanchonetes."),z(!1);return}const t=(s||[]).filter(n=>n.status!==!1).map(n=>({id:n.id,name:n.nome_lanchonete,address:n.endereco}));A(t),z(!1)},[b,v]=i.useState({nameCategorias:"",descricaoCategorias:"",urlImagemCategorias:""}),I=s=>{v({...b,[s.target.id]:s.target.value})},[P,rs]=i.useState([]),[ts,ue]=i.useState(!1),ae=async()=>{ue(!0);const{data:s,error:a}=await w.from("categorias").select("id, nomeCategoria, descricao, imagem").order("id",{ascending:!0});if(a){console.error(a),d.error("Erro ao carregar categorias."),ue(!1);return}const t=(s||[]).map(n=>({id:n.id,name:n.nomeCategoria,description:n.descricao,image_url:n.imagem}));rs(t),ue(!1)};i.useEffect(()=>{ae(),l(),K(),Pe()},[]);const os=async s=>{s.preventDefault();try{const{error:a}=await w.from("categorias").insert({nomeCategoria:b.nameCategorias,descricao:b.descricaoCategorias,imagem:b.urlImagemCategorias});if(a){console.log(a),d.error("Erro ao salvar dados no banco.");return}d.success("Cadastro de categoria realizado!"),Ee(!1),v({nameCategorias:"",descricaoCategorias:"",urlImagemCategorias:""}),ae()}catch(a){console.log(a),d.error("Erro inesperado ao cadastrar")}},[L,U]=i.useState({name:"",description:"",image_url:""}),[Ce,be]=i.useState(null),[ns,ye]=i.useState(null);i.useEffect(()=>{P.length!==0&&o(s=>P.some(t=>t.id===s.categoria_id)?s:{...s,categoria_id:P[0].id})},[P]),i.useEffect(()=>{f.length!==0&&o(s=>f.some(t=>t.id===s.lanchonete_id)?s:{...s,lanchonete_id:f[0].id})},[f]);const is=async()=>{if(!L.name){d.error("Preencha o nome da categoria!");return}try{const{error:s}=await w.from("categorias").update({nomeCategoria:L.name,descricao:L.description,imagem:L.image_url}).eq("id",ns.id);if(s){console.error(s),d.error("Erro ao atualizar categoria.");return}d.success("Categoria atualizada com sucesso!"),je(!1),ye(null),U({name:"",description:"",image_url:""}),ae()}catch(s){console.error(s),d.error("Erro inesperado ao atualizar categoria.")}},ds=s=>{ye(s),U({name:s.name,description:s.description,image_url:s.image_url}),je(!0)},cs=async s=>{if(u.some(t=>t.categoria_id===s)){d.error("Não é possível excluir categoria com produtos!");return}try{const{error:t}=await w.from("categorias").delete().eq("id",s);if(t){console.error(t),d.error("Erro ao remover categoria.");return}d.success("Categoria removida!"),ae()}catch(t){console.error(t),d.error("Erro inesperado ao remover categoria.")}},[_e,ls]=i.useState([]),[hs,we]=i.useState(!1),[ms,us]=i.useState([]),[xs,xe]=i.useState(!1),[x,gs]=i.useState(null),Pe=async()=>{we(!0);try{const{data:s,error:a}=await w.from("pedidos").select(`
    id,
    total,
    status,
    address,
    payment_method,
    metadata,
    created_at,
    usuario:usuario_id (nome, email, telefone),
    lanchonete:lanchonete_id (nome_lanchonete)
  `).order("created_at",{ascending:!1});if(a)throw a;ls(s||[])}catch(s){console.error(s),d.error("Erro ao carregar pedidos.")}finally{we(!1)}},js=async s=>{try{const{data:a,error:t}=await w.from("pedido_items").select(`
    id,
    title,
    price,
    qty,
    metadata,
    produto:product_id (nome, imagem)
  `).eq("pedido_id",s);if(t)throw t;return a||[]}catch(a){return console.error(a),[]}},ps=async s=>{gs(s);const a=await js(s.id);us(a),xe(!0)},re=async(s,a)=>{try{const{error:t}=await w.from("pedidos").update({status:a}).eq("id",s);if(t){console.error(t),d.error("Erro ao atualizar status.");return}d.success("Status do pedido atualizado!"),Pe()}catch(t){console.error(t),d.error("Erro ao atualizar status.")}},[fs,Se]=i.useState(!1),[vs,ge]=i.useState(!1),[Ns,Ee]=i.useState(!1),[Cs,je]=i.useState(!1),bs=[{day:"Seg",value:250},{day:"Ter",value:380},{day:"Qua",value:420},{day:"Qui",value:310},{day:"Sex",value:580},{day:"Sáb",value:720},{day:"Dom",value:650}],ke=[{name:"Pendente",value:12,color:"hsl(var(--chart-1))"},{name:"Preparando",value:8,color:"hsl(var(--chart-2))"},{name:"Pronto",value:5,color:"hsl(var(--chart-3))"},{name:"Entregue",value:45,color:"hsl(var(--chart-4))"}],ys=[{product:"X-Burger",sales:45},{product:"Pizza",sales:38},{product:"Coca-Cola",sales:62},{product:"Esfiha",sales:28},{product:"X-Salada",sales:33}],pe={value:{label:"Vendas",color:"hsl(var(--primary))"},sales:{label:"Quantidade",color:"hsl(var(--primary))"}},Le=s=>{const a={pending:{label:"Pendente",variant:"secondary"},preparing:{label:"Preparando",variant:"default"},ready:{label:"Pronto",variant:"outline"},delivered:{label:"Entregue",variant:"outline"},cancelled:{label:"Cancelado",variant:"destructive"}},{label:t,variant:n}=a[s]||a.pending;return e.jsx(Ge,{variant:n,children:t})},De=s=>{const a=P.find(t=>t.id===s);return a?a.name:"Sem categoria"},Fe=s=>{const a=f.find(t=>t.id===s);return a?a.name:"Sem unidade"},Te=s=>new Date(s).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),Ie=u.filter(s=>{var $e,Be;const a=se.trim().toLowerCase();if(!a)return!0;const t=($e=s.nome)==null?void 0:$e.toLowerCase().includes(a),n=(Be=s.descricao)==null?void 0:Be.toLowerCase().includes(a),te=De(s.categoria_id).toLowerCase().includes(a),_s=Fe(s.lanchonete_id).toLowerCase().includes(a);return t||n||te||_s});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ls,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Painel Administrativo"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie pedidos, produtos e categorias"})]}),e.jsxs(Ds,{defaultValue:"dashboard",className:"space-y-6",children:[e.jsxs(Fs,{className:"grid w-full max-w-4xl grid-cols-4",children:[e.jsxs(ne,{value:"dashboard",className:"gap-2",children:[e.jsx(ws,{className:"h-4 w-4"}),"Dashboard"]}),e.jsxs(ne,{value:"orders",className:"gap-2",children:[e.jsx(Ve,{className:"h-4 w-4"}),"Pedidos"]}),e.jsxs(ne,{value:"products",className:"gap-2",children:[e.jsx(He,{className:"h-4 w-4"}),"Produtos"]}),e.jsxs(ne,{value:"categories",className:"gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Categorias"]})]}),e.jsxs(ie,{value:"dashboard",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(S,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Vendas Totais"}),e.jsx(Ss,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"R$ 3.310,00"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+12.5%"})," em relação ao mês passado"]})]})]}),e.jsxs(S,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Pedidos"}),e.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"70"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+8.2%"})," em relação à semana passada"]})]})]}),e.jsxs(S,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Produtos Ativos"}),e.jsx(He,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.filter(s=>s.disponivel).length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["de ",u.length," produtos cadastrados"]})]})]}),e.jsxs(S,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Ticket Médio"}),e.jsx(Es,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"R$ 47,29"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+5.3%"})," em relação ao mês passado"]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(S,{children:[e.jsxs(D,{children:[e.jsx(F,{children:"Vendas da Semana"}),e.jsx(B,{children:"Faturamento diário em R$"})]}),e.jsx(E,{children:e.jsx(he,{config:pe,className:"h-[300px]",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Is,{data:bs,children:[e.jsx(Ze,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Je,{dataKey:"day",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(es,{className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ve,{content:e.jsx(me,{})}),e.jsx(qs,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))",r:4}})]})})})})]}),e.jsxs(S,{children:[e.jsxs(D,{children:[e.jsx(F,{children:"Status dos Pedidos"}),e.jsx(B,{children:"Distribuição por status"})]}),e.jsx(E,{children:e.jsx(he,{config:pe,className:"h-[300px]",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(Os,{children:[e.jsx(zs,{data:ke,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${s}: ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:ke.map((s,a)=>e.jsx(Rs,{fill:s.color},`cell-${a}`))}),e.jsx(ve,{content:e.jsx(me,{})})]})})})})]}),e.jsxs(S,{className:"md:col-span-2",children:[e.jsxs(D,{children:[e.jsx(F,{children:"Produtos Mais Vendidos"}),e.jsx(B,{children:"Top 5 produtos do mês"})]}),e.jsx(E,{children:e.jsx(he,{config:pe,className:"h-[300px]",children:e.jsx(le,{width:"100%",height:"100%",children:e.jsxs(As,{data:ys,children:[e.jsx(Ze,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Je,{dataKey:"product",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(es,{className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(ve,{content:e.jsx(me,{})}),e.jsx($s,{dataKey:"sales",fill:"hsl(var(--primary))",radius:[8,8,0,0]})]})})})})]})]})]}),e.jsxs(ie,{value:"orders",className:"space-y-4",children:[e.jsxs(S,{children:[e.jsxs(D,{children:[e.jsx(F,{children:"Gerenciar Pedidos"}),e.jsx(B,{children:"Visualize e atualize o status dos pedidos"})]}),e.jsx(E,{children:hs?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Carregando pedidos..."}):_e.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Nenhum pedido encontrado."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Me,{children:[e.jsx(Qe,{children:e.jsxs(de,{children:[e.jsx(j,{children:"ID"}),e.jsx(j,{children:"Cliente"}),e.jsx(j,{children:"Lanchonete"}),e.jsx(j,{children:"Total"}),e.jsx(j,{children:"Status"}),e.jsx(j,{children:"Data/Hora"}),e.jsx(j,{children:"Ações"})]})}),e.jsx(We,{children:_e.map(s=>{var a,t,n;return e.jsxs(de,{children:[e.jsxs(p,{className:"font-medium",children:["#",s.id.slice(0,8)]}),e.jsx(p,{children:((a=s.usuario)==null?void 0:a.nome)||((t=s.metadata)==null?void 0:t.customer_name)||"Cliente"}),e.jsx(p,{children:((n=s.lanchonete)==null?void 0:n.nome_lanchonete)||"-"}),e.jsxs(p,{className:"font-semibold",children:["R$ ",Number(s.total).toFixed(2)]}),e.jsx(p,{children:Le(s.status)}),e.jsx(p,{className:"text-sm text-muted-foreground",children:Te(s.created_at)}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>ps(s),children:"Ver Detalhes"}),e.jsxs(X,{value:s.status,onValueChange:R=>re(s.id,R),children:[e.jsx(G,{className:"w-36",children:e.jsx(M,{})}),e.jsxs(Q,{children:[e.jsx(q,{value:"pending",children:"Pendente"}),e.jsx(q,{value:"preparing",children:"Preparando"}),e.jsx(q,{value:"ready",children:"Pronto"}),e.jsx(q,{value:"delivered",children:"Entregue"}),e.jsx(q,{value:"cancelled",children:"Cancelado"})]})]})]})})]},s.id)})})]})})})]}),e.jsx(W,{open:xs,onOpenChange:xe,children:e.jsxs(Y,{className:"max-w-lg",children:[e.jsxs(Z,{children:[e.jsx(J,{children:"Detalhes do Pedido"}),e.jsxs(ee,{children:["Pedido #",x==null?void 0:x.id.slice(0,8)]})]}),x&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Cliente"}),e.jsx("p",{className:"font-medium",children:((qe=x.usuario)==null?void 0:qe.nome)||((Oe=x.metadata)==null?void 0:Oe.customer_name)||"Cliente"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Telefone"}),e.jsx("p",{className:"font-medium",children:((ze=x.usuario)==null?void 0:ze.telefone)||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Data"}),e.jsx("p",{className:"font-medium",children:Te(x.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Status"}),Le(x.status)]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Pagamento"}),e.jsx("p",{className:"font-medium",children:((Re=x.payment_method)==null?void 0:Re.toUpperCase())||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Endereço"}),e.jsx("p",{className:"font-medium",children:x.address||"Retirada no balcão"})]})]}),((Ae=x.metadata)==null?void 0:Ae.notes)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm",children:"Observações"}),e.jsx("p",{className:"text-sm",children:x.metadata.notes})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-sm mb-2",children:"Itens do Pedido"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:ms.map(s=>{var a,t,n,R,te,fe;return e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-muted rounded-lg",children:[(((a=s.metadata)==null?void 0:a.image)||((t=s.produto)==null?void 0:t.imagem))&&e.jsx("img",{src:((n=s.metadata)==null?void 0:n.image)||((R=s.produto)==null?void 0:R.imagem),alt:((te=s.produto)==null?void 0:te.nome)||s.title||"Produto",className:"w-12 h-12 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s.title||((fe=s.produto)==null?void 0:fe.nome)||"Produto"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.qty,"x R$ ",Number(s.price).toFixed(2)]})]}),e.jsxs("p",{className:"font-semibold",children:["R$ ",(s.qty*Number(s.price)).toFixed(2)]})]},s.id)})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx("span",{className:"text-lg font-bold",children:"Total"}),e.jsxs("span",{className:"text-lg font-bold text-primary",children:["R$ ",Number(x.total).toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(N,{className:"flex-1",variant:"outline",onClick:()=>re(x.id,"preparing"),disabled:x.status==="preparing",children:"Preparando"}),e.jsx(N,{className:"flex-1",variant:"outline",onClick:()=>re(x.id,"ready"),disabled:x.status==="ready",children:"Pronto"}),e.jsx(N,{className:"flex-1",onClick:()=>{re(x.id,"delivered"),xe(!1)},disabled:x.status==="delivered",children:"Finalizar"})]})]})]})})]}),e.jsx(ie,{value:"products",className:"space-y-4",children:e.jsxs(S,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Gerenciar Produtos"}),e.jsx(B,{children:"Adicione, edite ou remova produtos do cardápio"})]}),e.jsxs(W,{open:fs,onOpenChange:Se,children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(N,{className:"gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Adicionar Produto"]})}),e.jsx(Y,{className:"max-w-md",children:e.jsxs("form",{onSubmit:m,children:[e.jsxs(Z,{children:[e.jsx(J,{children:"Novo Produto"}),e.jsx(ee,{children:"Preencha os dados do produto"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"nome",children:"Nome"}),e.jsx(y,{id:"nome",value:r.nome,onChange:c,placeholder:"Ex: X-Burger Especial"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"descricao",children:"Descrição"}),e.jsx(oe,{id:"descricao",value:r.descricao,onChange:c,placeholder:"Descreva o produto"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"preco",children:"Preço (R$)"}),e.jsx(y,{id:"preco",type:"number",step:"0.01",value:r.preco,onChange:c,placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"estoque",children:"Estoque"}),e.jsx(y,{id:"estoque",type:"number",min:"0",value:r.estoque,onChange:c,placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"categoria_id",children:"Categoria"}),e.jsxs(X,{value:r.categoria_id?r.categoria_id.toString():"",onValueChange:s=>o(a=>({...a,categoria_id:s})),children:[e.jsx(G,{children:e.jsx(M,{})}),e.jsx(Q,{children:P.map(s=>e.jsx(q,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"lanchonete_id",children:"Lanchonete"}),e.jsxs(X,{value:r.lanchonete_id?r.lanchonete_id.toString():"",onValueChange:s=>o(a=>({...a,lanchonete_id:s})),disabled:f.length===0,children:[e.jsx(G,{children:e.jsx(M,{placeholder:$?"Carregando...":"Selecione"})}),e.jsx(Q,{children:f.map(s=>e.jsx(q,{value:s.id.toString(),children:s.name},s.id))})]}),f.length===0&&!$&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cadastre uma lanchonete antes de criar produtos."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"disponivel",checked:r.disponivel,onChange:s=>o(a=>({...a,disponivel:s.target.checked})),className:"w-4 h-4"}),e.jsx(h,{htmlFor:"disponivel",children:"Produto disponível"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"imagem",children:"URL da Imagem"}),e.jsx(y,{id:"imagem",value:r.imagem,onChange:c,placeholder:"https://..."})]})]}),e.jsx(ce,{children:e.jsx(N,{type:"submit",className:"w-full mt-4",children:"Adicionar Produto"})})]})})]})]}),e.jsxs(E,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Buscar por nome, descrição, categoria ou lanchonete...",value:se,onChange:s=>H(s.target.value),className:"pl-10"})]})}),_?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando produtos..."}):u.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum produto cadastrado."}):Ie.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum produto encontrado para a busca."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Me,{children:[e.jsx(Qe,{children:e.jsxs(de,{children:[e.jsx(j,{children:"Imagem"}),e.jsx(j,{children:"Nome"}),e.jsx(j,{children:"Descrição"}),e.jsx(j,{children:"Preço"}),e.jsx(j,{children:"Categoria"}),e.jsx(j,{children:"Lanchonete"}),e.jsx(j,{children:"Status"}),e.jsx(j,{children:"Ações"})]})}),e.jsx(We,{children:Ie.map(s=>e.jsxs(de,{children:[e.jsx(p,{children:e.jsx("img",{src:s.imagem,alt:s.nome,className:"w-16 h-16 object-cover rounded"})}),e.jsx(p,{className:"font-medium",children:s.nome}),e.jsx(p,{className:"max-w-xs truncate text-muted-foreground text-sm",children:s.descricao}),e.jsxs(p,{className:"font-semibold",children:["R$ ",s.preco.toFixed(2)]}),e.jsx(p,{children:De(s.categoria_id)}),e.jsx(p,{children:Fe(s.lanchonete_id)}),e.jsx(p,{children:e.jsx(Ge,{variant:s.disponivel?"outline":"secondary",children:s.disponivel?"Disponível":"Indisponível"})}),e.jsx(p,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{variant:"outline",size:"icon",onClick:()=>T(s),children:e.jsx(Ue,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"icon",onClick:()=>C(s.id),children:e.jsx(Xe,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})]})}),e.jsx(ie,{value:"categories",className:"space-y-4",children:e.jsxs(S,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Gerenciar Categorias"}),e.jsx(B,{children:"Adicione, edite ou remova categorias de produtos"})]}),e.jsxs(W,{open:Ns,onOpenChange:Ee,children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(N,{className:"gap-2",children:[e.jsx(Ke,{className:"h-4 w-4"}),"Adicionar Categoria"]})}),e.jsx(Y,{className:"max-w-md",children:e.jsxs("form",{onSubmit:os,children:[e.jsxs(Z,{children:[e.jsx(J,{children:"Nova Categoria"}),e.jsx(ee,{children:"Preencha os dados da categoria"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"nameCategorias",children:"Nome"}),e.jsx(y,{id:"nameCategorias",value:b.nameCategorias,onChange:I,placeholder:"Ex: Lanches"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"descricaoCategorias",children:"Descrição"}),e.jsx(oe,{id:"descricaoCategorias",value:b.descricaoCategorias,onChange:I,placeholder:"Descreva a categoria"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"urlImagemCategorias",children:"URL da Imagem"}),e.jsx(y,{id:"urlImagemCategorias",value:b.urlImagemCategorias,onChange:I,placeholder:"https://..."})]})]}),e.jsx(ce,{children:e.jsx(N,{type:"submit",className:"w-full mt-4",children:"Adicionar Categoria"})})]})})]})]}),e.jsx(E,{children:ts?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando categorias..."}):P.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma categoria cadastrada."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:P.map(s=>e.jsxs(S,{className:"overflow-hidden",children:[e.jsx("div",{className:"aspect-video relative",children:e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs(E,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>ds(s),children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>cs(s.id),children:e.jsx(Xe,{className:"h-4 w-4"})})]})]})]},s.id))})})]})})]}),e.jsx(W,{open:vs,onOpenChange:ge,children:e.jsxs(Y,{className:"max-w-md",children:[e.jsxs(Z,{children:[e.jsx(J,{children:"Editar Produto"}),e.jsx(ee,{children:"Atualize os dados do produto"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-nome",children:"Nome"}),e.jsx(y,{id:"edit-nome",value:r.nome,onChange:s=>o({...r,nome:s.target.value}),placeholder:"Ex: X-Burger Especial"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-descricao",children:"Descrição"}),e.jsx(oe,{id:"edit-descricao",value:r.descricao,onChange:s=>o({...r,descricao:s.target.value}),placeholder:"Descreva o produto"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-preco",children:"Preço (R$)"}),e.jsx(y,{id:"edit-preco",type:"number",step:"0.01",value:r.preco,onChange:s=>o({...r,preco:s.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-estoque",children:"Estoque"}),e.jsx(y,{id:"edit-estoque",type:"number",min:"0",value:r.estoque,onChange:s=>o({...r,estoque:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-categoria",children:"Categoria"}),e.jsxs(X,{value:r.categoria_id?r.categoria_id.toString():"",onValueChange:s=>o({...r,categoria_id:s}),children:[e.jsx(G,{children:e.jsx(M,{})}),e.jsx(Q,{children:P.map(s=>e.jsx(q,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-lanchonete",children:"Lanchonete"}),e.jsxs(X,{value:r.lanchonete_id?r.lanchonete_id.toString():"",onValueChange:s=>o({...r,lanchonete_id:s}),disabled:f.length===0,children:[e.jsx(G,{children:e.jsx(M,{placeholder:$?"Carregando...":"Selecione"})}),e.jsx(Q,{children:f.map(s=>e.jsx(q,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-imagem",children:"URL da Imagem"}),e.jsx(y,{id:"edit-imagem",value:r.imagem,onChange:s=>o({...r,imagem:s.target.value}),placeholder:"https://..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"edit-disponivel",checked:r.disponivel,onChange:s=>o({...r,disponivel:s.target.checked}),className:"w-4 h-4"}),e.jsx(h,{htmlFor:"edit-disponivel",className:"cursor-pointer",children:"Produto disponível"})]})]}),e.jsx(ce,{children:e.jsx(N,{onClick:g,className:"w-full",children:"Salvar Alterações"})})]})}),e.jsx(W,{open:Cs,onOpenChange:je,children:e.jsxs(Y,{className:"max-w-md",children:[e.jsxs(Z,{children:[e.jsx(J,{children:"Editar Categoria"}),e.jsx(ee,{children:"Atualize os dados da categoria"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-cat-name",children:"Nome"}),e.jsx(y,{id:"edit-cat-name",value:L.name,onChange:s=>U({...L,name:s.target.value}),placeholder:"Ex: Lanches"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-cat-description",children:"Descrição"}),e.jsx(oe,{id:"edit-cat-description",value:L.description,onChange:s=>U({...L,description:s.target.value}),placeholder:"Descreva a categoria"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"edit-cat-image",children:"URL da Imagem"}),e.jsx(y,{id:"edit-cat-image",value:L.image_url,onChange:s=>U({...L,image_url:s.target.value}),placeholder:"https://..."})]})]}),e.jsx(ce,{children:e.jsx(N,{onClick:is,className:"w-full",children:"Salvar Alterações"})})]})})]})]})};export{Js as default};
