import{aB as v,ad as s,aU as f,aD as g,aV as b,aS as C,aW as y,aC as i}from"./vendor-WvxInmkI.js";import{u as w,H as k,C as t,B as c,a as o}from"./index-BInAVXNB.js";import"./supabase-DuVauSO6.js";import"./radix-BvlS9Eci.js";import"./react-query-D1LWqImO.js";const I=()=>{const l=v(),{cartItems:n,updateQuantity:d,removeItem:x,clearCart:q,total:m}=w(),r=async(e,N)=>{try{const a=await d(e,N);a!=null&&a.success||i.error((a==null?void 0:a.availableStock)>0?`Estoque disponível: ${a.availableStock} unidade(s).`:"Produto sem estoque disponível.")}catch(a){console.error("Erro ao atualizar quantidade",a),i.error("Não foi possível verificar o estoque agora.")}},h=e=>r(e,-1),p=e=>r(e,1),u=e=>{x(e),i.success("Item removido do carrinho")},j=()=>{l("/pagamento",{state:{fromCheckout:!0}})};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(k,{}),s.jsxs("main",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Meu Carrinho"}),n.length===0?s.jsx(t,{className:"p-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx(f,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),s.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Seu carrinho está vazio"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Adicione itens do cardápio para começar seu pedido"}),s.jsx(g,{to:"../lanchonete",children:s.jsx(c,{children:"Ver Cardápio"})})]})}):s.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[s.jsx("div",{className:"md:col-span-2 space-y-4",children:n.map(e=>s.jsx(t,{children:s.jsxs(o,{className:"p-4 flex gap-4",children:[s.jsx("img",{src:e.image,alt:e.name,className:"w-24 h-24 object-cover rounded"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-lg mb-1",children:e.name}),s.jsxs("p",{className:"text-primary font-bold",children:["R$ ",e.price.toFixed(2)]}),s.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[s.jsx(c,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>h(e.id),children:s.jsx(b,{className:"h-4 w-4"})}),s.jsx("span",{className:"font-semibold w-8 text-center",children:e.quantity}),s.jsx(c,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>p(e.id),children:s.jsx(C,{className:"h-4 w-4"})})]})]}),s.jsx(c,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>u(e.id),children:s.jsx(y,{className:"h-5 w-5"})})]})},e.id))}),s.jsx("div",{children:s.jsx(t,{className:"sticky top-24",children:s.jsxs(o,{className:"p-6 space-y-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Resumo do Pedido"}),s.jsx("div",{className:"space-y-2",children:n.map(e=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[e.quantity,"x ",e.name]}),s.jsxs("span",{children:["R$ ",(e.price*e.quantity).toFixed(2)]})]},e.id))}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{className:"text-primary",children:["R$ ",m.toFixed(2)]})]})}),s.jsx(c,{className:"w-full",size:"lg",onClick:j,children:"Finalizar Pedido"})]})})})]})]})]})};export{I as default};
