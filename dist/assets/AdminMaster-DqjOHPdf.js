import{r as d,ad as e,a_ as pe,a$ as Y,aX as K,aP as ge,b0 as ve,aH as Q,b1 as Ne,aO as be,aW as Ce,aM as Z,aY as Se,aR as we,aU as ye,aV as Le,aC as r}from"./vendor-C4YCU9L4.js";import{H as Ae}from"./Header-2VjGWnYo.js";import{C as u,c as f,d as p,e as E,a as g}from"./card-DYq_ZU2g.js";import{T as Te,a as Ee,b as _,c as k}from"./tabs-Cbmpagbj.js";import{B as v}from"./button-wdJszIiX.js";import{I as l}from"./input-DTTsWnCS.js";import{L as o}from"./label-CrBnGp82.js";import{B as ee,D as R,j as se,k as H,l as O,m as z,n as $,p as U,T as B,a as G,b as N,c as i,d as V,e as t,S as _e,f as ke,g as Me,h as Fe,i as Pe}from"./badge-COqF9uzH.js";import{c as ne,d as De}from"./radix-BdbzPyf5.js";import{c as ae,s as T}from"./index-DLOkv6-d.js";import"./supabase-i8UOGaJf.js";import"./react-query-CMlviXwV.js";const w=d.forwardRef(({className:b,...M},F)=>e.jsx(ne,{className:ae("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",b),...M,ref:F,children:e.jsx(De,{className:ae("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));w.displayName=ne.displayName;const We=()=>{const[b,M]=d.useState([]),[F,P]=d.useState(!1),[te,q]=d.useState(!1),[oe,D]=d.useState(!1),[J,W]=d.useState(null),[a,m]=d.useState({nome_lanchonete:"",endereco:"",telefone:"",horario:"",status:!0}),[y,I]=d.useState([{id:1,nome_lanchonete:"João Silva",email:"joao@admin.com",lanchonete:"Lanchonete Centro",status:!0,dataAdicao:"2024-01-15"},{id:2,nome_lanchonete:"Maria Santos",email:"maria@admin.com",lanchonete:"Lanchonete Campus Norte",status:!0,dataAdicao:"2024-01-20"}]),[re,X]=d.useState(!1),[c,L]=d.useState({nome_lanchonete:"",email:"",lanchoneteId:"",senha:""}),[C,ie]=d.useState({totalLanchonetes:2,totalAdmins:2,totalUsuarios:150,totalPedidos:450,receitaTotal:15750,pedidosHoje:28}),[h,S]=d.useState({taxaEntrega:"5.00",tempoMinimoPreparo:"30",pedidoMinimo:"20.00",notificacoesEmail:!0,notificacoesSMS:!1,manutencao:!1}),A=async()=>{P(!0);const{data:s,error:n}=await T.from("lanchonete").select("id, nome_lanchonete, endereco, telefone, horario, status").order("nome_lanchonete",{ascending:!0});if(n){console.error(n),r.error("Erro ao carregar lanchonetes."),P(!1);return}const x=(s||[]).map(j=>({id:j.id,nome_lanchonete:j.nome_lanchonete,endereco:j.endereco??"",telefone:j.telefone??"",horario:j.horario??"",status:j.status??!0}));M(x),ie(j=>({...j,totalLanchonetes:x.length})),P(!1)};d.useEffect(()=>{A()},[]);const ce=async s=>{if(s.preventDefault(),!a.nome_lanchonete||!a.endereco){r.error("Preencha nome e endereço da lanchonete!");return}try{const{error:n}=await T.from("lanchonete").insert({nome_lanchonete:a.nome_lanchonete,endereco:a.endereco,telefone:a.telefone,horario:a.horario,status:a.status});if(n)throw n;r.success("Lanchonete adicionada com sucesso!"),q(!1),m({nome_lanchonete:"",endereco:"",telefone:"",horario:"",status:!0}),A()}catch(n){console.error(n),r.error("Erro ao salvar lanchonete.")}},le=s=>{W(s),m({nome_lanchonete:s.nome_lanchonete,endereco:s.endereco,telefone:s.telefone,horario:s.horario,status:s.status}),D(!0)},de=async()=>{if(!a.nome_lanchonete||!a.endereco||!J){r.error("Preencha nome e endereço da lanchonete!");return}try{const{error:s}=await T.from("lanchonete").update({nome_lanchonete:a.nome_lanchonete,endereco:a.endereco,telefone:a.telefone,horario:a.horario,status:a.status}).eq("id",J.id);if(s)throw s;r.success("Lanchonete atualizada com sucesso!"),D(!1),W(null),m({nome_lanchonete:"",endereco:"",telefone:"",horario:"",status:!0}),A()}catch(s){console.error(s),r.error("Erro ao atualizar lanchonete.")}},he=async s=>{try{const{error:n}=await T.from("lanchonete").delete().eq("id",s);if(n)throw n;r.success("Lanchonete removida!"),A()}catch(n){console.error(n),r.error("Erro ao remover lanchonete.")}},me=async s=>{const n=b.find(x=>x.id===s);if(n)try{const{error:x}=await T.from("lanchonete").update({status:!n.status}).eq("id",s);if(x)throw x;r.success("Status atualizado!"),A()}catch(x){console.error(x),r.error("Erro ao atualizar status.")}},xe=s=>{if(s.preventDefault(),!c.nome_lanchonete||!c.email||!c.lanchoneteId){r.error("Preencha todos os campos obrigatórios!");return}const n=b.find(j=>j.id===parseInt(c.lanchoneteId)),x={id:y.length+1,nome_lanchonete:c.nome,email:c.email,lanchonete:(n==null?void 0:n.nome)||"",status:!0,dataAdicao:new Date().toISOString().split("T")[0]};I([...y,x]),r.success("Admin adicionado com sucesso!"),X(!1),L({nome_lanchonete:"",email:"",lanchoneteId:"",senha:""})},je=s=>{I(y.map(n=>n.id===s?{...n,status:!n.status}:n)),r.success("Status do admin atualizado!")},ue=s=>{I(y.filter(n=>n.id!==s)),r.success("Admin removido!")},fe=()=>{r.success("Configurações salvas com sucesso!")};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ae,{}),e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Painel Master"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerenciamento geral do sistema"})]}),e.jsxs(ee,{variant:"outline",className:"gap-2",children:[e.jsx(pe,{className:"h-4 w-4"}),"Master Admin"]})]}),e.jsxs(Te,{defaultValue:"lanchonetes",className:"space-y-6",children:[e.jsxs(Ee,{className:"grid w-full grid-cols-4",children:[e.jsxs(_,{value:"lanchonetes",className:"gap-2",children:[e.jsx(Y,{className:"h-4 w-4"}),"Lanchonetes"]}),e.jsxs(_,{value:"admins",className:"gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),"Admins"]}),e.jsxs(_,{value:"estatisticas",className:"gap-2",children:[e.jsx(ge,{className:"h-4 w-4"}),"Estatísticas"]}),e.jsxs(_,{value:"configuracoes",className:"gap-2",children:[e.jsx(ve,{className:"h-4 w-4"}),"Configurações"]})]}),e.jsx(k,{value:"lanchonetes",className:"space-y-4",children:e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Gerenciar Lanchonetes"}),e.jsx(E,{children:"Cadastre e gerencie as lanchonetes do sistema"})]}),e.jsxs(R,{open:te,onOpenChange:q,children:[e.jsx(se,{asChild:!0,children:e.jsxs(v,{className:"gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Nova Lanchonete"]})}),e.jsxs(H,{children:[e.jsxs(O,{children:[e.jsx(z,{children:"Adicionar Lanchonete"}),e.jsx($,{children:"Cadastre uma nova lanchonete no sistema"})]}),e.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"nome_lanchonete",children:"Nome *"}),e.jsx(l,{id:"nome_lanchonete",value:a.nome_lanchonete,onChange:s=>m({...a,nome_lanchonete:s.target.value}),placeholder:"Nome da lanchonete"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"endereco",children:"Endereço *"}),e.jsx(l,{id:"endereco",value:a.endereco,onChange:s=>m({...a,endereco:s.target.value}),placeholder:"Endereço completo"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"telefone",children:"Telefone"}),e.jsx(l,{id:"telefone",value:a.telefone,onChange:s=>m({...a,telefone:s.target.value}),placeholder:"(00) 0000-0000"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"horario",children:"Horário de Funcionamento"}),e.jsx(l,{id:"horario",value:a.horario,onChange:s=>m({...a,horario:s.target.value}),placeholder:"Ex: 8h - 18h"})]}),e.jsx(U,{children:e.jsx(v,{type:"submit",children:"Adicionar"})})]})]})]})]})}),e.jsx(g,{children:e.jsxs(B,{children:[e.jsx(G,{children:e.jsxs(N,{children:[e.jsx(i,{children:"Nome"}),e.jsx(i,{children:"Endereço"}),e.jsx(i,{children:"Telefone"}),e.jsx(i,{children:"Horário"}),e.jsx(i,{children:"Status"}),e.jsx(i,{className:"text-right",children:"Ações"})]})}),e.jsx(V,{children:F?e.jsx(N,{children:e.jsx(t,{colSpan:6,className:"text-center text-sm text-muted-foreground",children:"Carregando lanchonetes..."})}):b.length===0?e.jsx(N,{children:e.jsx(t,{colSpan:6,className:"text-center text-sm text-muted-foreground",children:"Nenhuma lanchonete cadastrada."})}):b.map(s=>e.jsxs(N,{children:[e.jsx(t,{className:"font-medium",children:s.nome_lanchonete}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"}),s.endereco]})}),e.jsx(t,{children:s.telefone}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-muted-foreground"}),s.horario]})}),e.jsx(t,{children:e.jsx(w,{checked:s.status,onCheckedChange:()=>me(s.id)})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>le(s),children:e.jsx(Ce,{className:"h-4 w-4"})}),e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>he(s.id),children:e.jsx(Z,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})}),e.jsx(k,{value:"admins",className:"space-y-4",children:e.jsxs(u,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Gerenciar Administradores"}),e.jsx(E,{children:"Gerencie os admins de cada lanchonete"})]}),e.jsxs(R,{open:re,onOpenChange:X,children:[e.jsx(se,{asChild:!0,children:e.jsxs(v,{className:"gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Novo Admin"]})}),e.jsxs(H,{children:[e.jsxs(O,{children:[e.jsx(z,{children:"Adicionar Administrador"}),e.jsx($,{children:"Cadastre um novo administrador"})]}),e.jsxs("form",{onSubmit:xe,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"admin-nome",children:"Nome *"}),e.jsx(l,{id:"admin-nome",value:c.nome,onChange:s=>L({...c,nome:s.target.value}),placeholder:"Nome completo"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"admin-email",children:"Email *"}),e.jsx(l,{id:"admin-email",type:"email",value:c.email,onChange:s=>L({...c,email:s.target.value}),placeholder:"email@exemplo.com"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"admin-senha",children:"Senha *"}),e.jsx(l,{id:"admin-senha",type:"password",value:c.senha,onChange:s=>L({...c,senha:s.target.value}),placeholder:"Senha do admin"})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"lanchonete",children:"Lanchonete *"}),e.jsxs(_e,{value:c.lanchoneteId,onValueChange:s=>L({...c,lanchoneteId:s}),children:[e.jsx(ke,{children:e.jsx(Me,{placeholder:"Selecione uma lanchonete"})}),e.jsx(Fe,{children:b.map(s=>e.jsx(Pe,{value:s.id.toString(),children:s.nome_lanchonete},s.id))})]})]}),e.jsx(U,{children:e.jsx(v,{type:"submit",children:"Adicionar"})})]})]})]})]})}),e.jsx(g,{children:e.jsxs(B,{children:[e.jsx(G,{children:e.jsxs(N,{children:[e.jsx(i,{children:"Nome"}),e.jsx(i,{children:"Email"}),e.jsx(i,{children:"Lanchonete"}),e.jsx(i,{children:"Data de Adição"}),e.jsx(i,{children:"Status"}),e.jsx(i,{className:"text-right",children:"Ações"})]})}),e.jsx(V,{children:y.map(s=>e.jsxs(N,{children:[e.jsx(t,{className:"font-medium",children:s.nome}),e.jsx(t,{children:s.email}),e.jsx(t,{children:e.jsx(ee,{variant:"secondary",children:s.lanchonete})}),e.jsx(t,{children:s.dataAdicao}),e.jsx(t,{children:e.jsx(w,{checked:s.status,onCheckedChange:()=>je(s.id)})}),e.jsx(t,{className:"text-right",children:e.jsx(v,{variant:"ghost",size:"icon",onClick:()=>ue(s.id),children:e.jsx(Z,{className:"h-4 w-4"})})})]},s.id))})]})})]})}),e.jsxs(k,{value:"estatisticas",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(u,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Total de Lanchonetes"}),e.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:C.totalLanchonetes}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unidades ativas"})]})]}),e.jsxs(u,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Total de Admins"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:C.totalAdmins}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Administradores ativos"})]})]}),e.jsxs(u,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Total de Usuários"}),e.jsx(Se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:C.totalUsuarios}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Clientes cadastrados"})]})]}),e.jsxs(u,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Total de Pedidos"}),e.jsx(we,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:C.totalPedidos}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",C.pedidosHoje," hoje"]})]})]}),e.jsxs(u,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Receita Total"}),e.jsx(ye,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",C.receitaTotal.toFixed(2)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Todas as lanchonetes"})]})]}),e.jsxs(u,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Crescimento"}),e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"+12.5%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comparado ao mês anterior"})]})]})]}),e.jsxs(u,{children:[e.jsxs(f,{children:[e.jsx(p,{children:"Desempenho por Lanchonete"}),e.jsx(E,{children:"Comparativo de vendas entre unidades"})]}),e.jsx(g,{children:e.jsxs(B,{children:[e.jsx(G,{children:e.jsxs(N,{children:[e.jsx(i,{children:"Lanchonete"}),e.jsx(i,{children:"Pedidos"}),e.jsx(i,{children:"Receita"}),e.jsx(i,{children:"Ticket Médio"})]})}),e.jsxs(V,{children:[e.jsxs(N,{children:[e.jsx(t,{className:"font-medium",children:"Lanchonete Centro"}),e.jsx(t,{children:"280"}),e.jsx(t,{children:"R$ 9.450,00"}),e.jsx(t,{children:"R$ 33,75"})]}),e.jsxs(N,{children:[e.jsx(t,{className:"font-medium",children:"Lanchonete Campus Norte"}),e.jsx(t,{children:"170"}),e.jsx(t,{children:"R$ 6.300,00"}),e.jsx(t,{children:"R$ 37,06"})]})]})]})})]})]}),e.jsx(k,{value:"configuracoes",className:"space-y-4",children:e.jsxs(u,{children:[e.jsxs(f,{children:[e.jsx(p,{children:"Configurações do Sistema"}),e.jsx(E,{children:"Configure parâmetros globais da plataforma"})]}),e.jsxs(g,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Parâmetros de Pedido"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"taxaEntrega",children:"Taxa de Entrega (R$)"}),e.jsx(l,{id:"taxaEntrega",type:"number",step:"0.01",value:h.taxaEntrega,onChange:s=>S({...h,taxaEntrega:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"pedidoMinimo",children:"Pedido Mínimo (R$)"}),e.jsx(l,{id:"pedidoMinimo",type:"number",step:"0.01",value:h.pedidoMinimo,onChange:s=>S({...h,pedidoMinimo:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"tempoPreparo",children:"Tempo Mínimo de Preparo (min)"}),e.jsx(l,{id:"tempoPreparo",type:"number",value:h.tempoMinimoPreparo,onChange:s=>S({...h,tempoMinimoPreparo:s.target.value})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Notificações"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Notificações por Email"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enviar notificações de pedidos por email"})]}),e.jsx(w,{checked:h.notificacoesEmail,onCheckedChange:s=>S({...h,notificacoesEmail:s})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Notificações por SMS"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enviar notificações de pedidos por SMS"})]}),e.jsx(w,{checked:h.notificacoesSMS,onCheckedChange:s=>S({...h,notificacoesSMS:s})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sistema"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Modo Manutenção"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ativar modo de manutenção do sistema"})]}),e.jsx(w,{checked:h.manutencao,onCheckedChange:s=>S({...h,manutencao:s})})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx(v,{onClick:fe,children:"Salvar Configurações"})})]})]})})]})]}),e.jsx(R,{open:oe,onOpenChange:D,children:e.jsxs(H,{children:[e.jsxs(O,{children:[e.jsx(z,{children:"Editar Lanchonete"}),e.jsx($,{children:"Atualize as informações da lanchonete"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-nome",children:"Nome *"}),e.jsx(l,{id:"edit-nome",value:a.nome_lanchonete,onChange:s=>m({...a,nome_lanchonete:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-endereco",children:"Endereço *"}),e.jsx(l,{id:"edit-endereco",value:a.endereco,onChange:s=>m({...a,endereco:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-telefone",children:"Telefone"}),e.jsx(l,{id:"edit-telefone",value:a.telefone,onChange:s=>m({...a,telefone:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-horario",children:"Horário de Funcionamento"}),e.jsx(l,{id:"edit-horario",value:a.horario,onChange:s=>m({...a,horario:s.target.value})})]})]}),e.jsx(U,{children:e.jsx(v,{onClick:de,children:"Salvar Alterações"})})]})})]})};export{We as default};
