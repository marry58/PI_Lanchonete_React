import{r as c,ad as e,aC as n,aP as gs,aQ as ze,aR as qe,aS as js,aT as ps,aU as vs,aV as fs,aH as Ie,aI as Ue,aW as $e,aM as Oe,aX as Be,aY as Ns,aZ as Cs}from"./vendor-C4YCU9L4.js";import{c as D,s as y}from"./index-DLOkv6-d.js";import{H as bs}from"./Header-2VjGWnYo.js";import{C as b,c as P,d as S,a as w,e as q}from"./card-DYq_ZU2g.js";import{T as ws,a as ys,b as K,c as M}from"./tabs-Cbmpagbj.js";import{B as _}from"./button-wdJszIiX.js";import{I as v}from"./input-DTTsWnCS.js";import{L as g}from"./label-CrBnGp82.js";import{T as je,a as pe,b as U,c as h,d as ve,e as u,S as Y,f as Z,g as ee,h as se,i as T,D as ae,j as Ve,k as re,l as oe,m as te,n as ie,o as ne,p as le,B as ce}from"./badge-COqF9uzH.js";import{R as de,T as Ps,L as Ss,C as He,X as Xe,Y as Ke,a as _s,P as Es,b as ks,c as Fs,B as Ts,d as Ls}from"./charts-BaChs1IL.js";import"./supabase-i8UOGaJf.js";import"./radix-BdbzPyf5.js";import"./react-query-CMlviXwV.js";const Ds={light:"",dark:".dark"},Me=c.createContext(null);function Ge(){const r=c.useContext(Me);if(!r)throw new Error("useChart must be used within a <ChartContainer />");return r}const me=c.forwardRef(({id:r,className:o,children:d,config:m,...j},L)=>{const f=c.useId(),x=`chart-${r||f.replace(/:/g,"")}`;return e.jsx(Me.Provider,{value:{config:m},children:e.jsxs("div",{"data-chart":x,ref:L,className:D("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",o),...j,children:[e.jsx(As,{id:x,config:m}),e.jsx(de,{children:d})]})})});me.displayName="Chart";const As=({id:r,config:o})=>{const d=Object.entries(o).filter(([m,j])=>j.theme||j.color);return d.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(Ds).map(([m,j])=>`
${j} [data-chart=${r}] {
${d.map(([L,f])=>{var E;const x=((E=f.theme)==null?void 0:E[m])||f.color;return x?`  --color-${L}: ${x};`:null}).join(`
`)}
}
`).join(`
`)}}):null},fe=Ps,he=c.forwardRef(({active:r,payload:o,className:d,indicator:m="dot",hideLabel:j=!1,hideIndicator:L=!1,label:f,labelFormatter:x,labelClassName:E,formatter:N,color:$,nameKey:G,labelKey:O},I)=>{const{config:C}=Ge(),B=c.useMemo(()=>{var k;if(j||!(o!=null&&o.length))return null;const[i]=o,V=`${O||i.dataKey||i.name||"value"}`,R=Ne(C,i,V),p=!O&&typeof f=="string"?((k=C[f])==null?void 0:k.label)||f:R==null?void 0:R.label;return x?e.jsx("div",{className:D("font-medium",E),children:x(p,o)}):p?e.jsx("div",{className:D("font-medium",E),children:p}):null},[f,x,o,j,E,C,O]);if(!r||!(o!=null&&o.length))return null;const A=o.length===1&&m!=="dot";return e.jsxs("div",{ref:I,className:D("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",d),children:[A?null:B,e.jsx("div",{className:"grid gap-1.5",children:o.map((i,V)=>{const R=`${G||i.name||i.dataKey||"value"}`,p=Ne(C,i,R),k=$||i.payload.fill||i.color;return e.jsx("div",{className:D("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",m==="dot"&&"items-center"),children:N&&(i==null?void 0:i.value)!==void 0&&i.name?N(i.value,i.name,i,V,i.payload):e.jsxs(e.Fragment,{children:[p!=null&&p.icon?e.jsx(p.icon,{}):!L&&e.jsx("div",{className:D("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":m==="dot","w-1":m==="line","w-0 border-[1.5px] border-dashed bg-transparent":m==="dashed","my-0.5":A&&m==="dashed"}),style:{"--color-bg":k,"--color-border":k}}),e.jsxs("div",{className:D("flex flex-1 justify-between leading-none",A?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[A?B:null,e.jsx("span",{className:"text-muted-foreground",children:(p==null?void 0:p.label)||i.name})]}),i.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:i.value.toLocaleString()})]})]})},i.dataKey)})})]})});he.displayName="ChartTooltip";const Rs=c.forwardRef(({className:r,hideIcon:o=!1,payload:d,verticalAlign:m="bottom",nameKey:j},L)=>{const{config:f}=Ge();return d!=null&&d.length?e.jsx("div",{ref:L,className:D("flex items-center justify-center gap-4",m==="top"?"pb-3":"pt-3",r),children:d.map(x=>{const E=`${j||x.dataKey||"value"}`,N=Ne(f,x,E);return e.jsxs("div",{className:D("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[N!=null&&N.icon&&!o?e.jsx(N.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:x.color}}),N==null?void 0:N.label]},x.value)})}):null});Rs.displayName="ChartLegend";function Ne(r,o,d){if(typeof o!="object"||o===null)return;const m="payload"in o&&typeof o.payload=="object"&&o.payload!==null?o.payload:void 0;let j=d;return d in o&&typeof o[d]=="string"?j=o[d]:m&&d in m&&typeof m[d]=="string"&&(j=m[d]),j in r?r[j]:r[d]}const Qs=()=>{const[r,o]=c.useState({nome:"",descricao:"",preco:"",categoria_id:null,imagem:"",disponivel:!0,estoque:0}),d=s=>{o({...r,[s.target.id]:s.target.value})},m=async s=>{var a;if(s.preventDefault(),!r.nome||!r.preco||!r.categoria_id){n.error("Preencha nome, preço e categoria do produto!");return}try{const t={nome:r.nome,descricao:r.descricao,preco:parseFloat(r.preco),categoria_id:r.categoria_id,imagem:r.imagem,disponivel:r.disponivel,estoque:Number(r.estoque)||0},{error:l}=await y.from("produtos").insert(t);if(l){console.error(l),n.error("Erro ao adicionar produto.");return}n.success("Produto adicionado com sucesso!"),ke(!1),o({nome:"",descricao:"",preco:"",categoria_id:((a=i[0])==null?void 0:a.id)??null,imagem:"",disponivel:!0,estoque:0}),I()}catch(t){console.error(t),n.error("Erro inesperado ao cadastrar produto.")}},j=async()=>{var s;if(!r.nome||!r.preco||!r.categoria_id||!Ce){n.error("Preencha nome, preço e categoria do produto!");return}try{const{error:a}=await y.from("produtos").update({nome:r.nome,descricao:r.descricao,preco:parseFloat(r.preco),categoria_id:r.categoria_id,imagem:r.imagem,disponivel:r.disponivel,estoque:Number(r.estoque)||0}).eq("id",Ce.id);if(a){console.error(a),n.error("Erro ao atualizar produto.");return}n.success("Produto atualizado com sucesso!"),ue(!1),be(null),o({nome:"",descricao:"",preco:"",categoria_id:((s=i[0])==null?void 0:s.id)??null,imagem:"",disponivel:!0,estoque:0}),I()}catch(a){console.error(a),n.error("Erro inesperado ao atualizar produto.")}},L=s=>{be(s),o({nome:s.nome,descricao:s.descricao,preco:s.preco.toString(),categoria_id:s.categoria_id,imagem:s.imagem,disponivel:s.disponivel,estoque:s.estoque??0}),ue(!0)},f=async s=>{try{const{error:a}=await y.from("produtos").delete().eq("id",s);if(a){console.error(a),n.error("Erro ao remover produto.");return}n.success("Produto removido!"),I()}catch(a){console.error(a),n.error("Erro inesperado ao remover produto.")}},[x,E]=c.useState([]),[N,$]=c.useState(!1),[G,O]=c.useState(""),I=async()=>{$(!0);const{data:s,error:a}=await y.from("produtos").select("id, nome, descricao, preco, categoria_id, imagem, disponivel, estoque").order("id",{ascending:!0});if(a){console.error(a),n.error("Erro ao carregar produtos."),$(!1);return}const t=(s||[]).map(l=>({id:l.id,nome:l.nome,descricao:l.descricao,preco:Number(l.preco)||0,categoria_id:l.categoria_id,imagem:l.imagem,disponivel:l.disponivel??!0,estoque:Number(l.estoque)||0}));E(t),$(!1)},[C,B]=c.useState({nameCategorias:"",descricaoCategorias:"",urlImagemCategorias:""}),A=s=>{B({...C,[s.target.id]:s.target.value})},[i,V]=c.useState([]),[R,p]=c.useState(!1),k=async()=>{p(!0);const{data:s,error:a}=await y.from("categorias").select("id, nomeCategoria, descricao, imagem").order("id",{ascending:!0});if(a){console.error(a),n.error("Erro ao carregar categorias."),p(!1);return}const t=(s||[]).map(l=>({id:l.id,name:l.nomeCategoria,description:l.descricao,image_url:l.imagem}));V(t),p(!1)};c.useEffect(()=>{k(),I(),Ee()},[]);const Qe=async s=>{s.preventDefault();try{const{error:a}=await y.from("categorias").insert({nomeCategoria:C.nameCategorias,descricao:C.descricaoCategorias,imagem:C.urlImagemCategorias});if(a){console.log(a),n.error("Erro ao salvar dados no banco.");return}n.success("Cadastro de categoria realizado!"),Fe(!1),B({nameCategorias:"",descricaoCategorias:"",urlImagemCategorias:""}),k()}catch(a){console.log(a),n.error("Erro inesperado ao cadastrar")}},[F,H]=c.useState({name:"",description:"",image_url:""}),[Ce,be]=c.useState(null),[Je,we]=c.useState(null);c.useEffect(()=>{i.length!==0&&o(s=>i.some(t=>t.id===s.categoria_id)?s:{...s,categoria_id:i[0].id})},[i]);const We=async()=>{if(!F.name){n.error("Preencha o nome da categoria!");return}try{const{error:s}=await y.from("categorias").update({nomeCategoria:F.name,descricao:F.description,imagem:F.image_url}).eq("id",Je.id);if(s){console.error(s),n.error("Erro ao atualizar categoria.");return}n.success("Categoria atualizada com sucesso!"),xe(!1),we(null),H({name:"",description:"",image_url:""}),k()}catch(s){console.error(s),n.error("Erro inesperado ao atualizar categoria.")}},Ye=s=>{we(s),H({name:s.name,description:s.description,image_url:s.image_url}),xe(!0)},Ze=async s=>{if(x.some(t=>t.categoria_id===s)){n.error("Não é possível excluir categoria com produtos!");return}try{const{error:t}=await y.from("categorias").delete().eq("id",s);if(t){console.error(t),n.error("Erro ao remover categoria.");return}n.success("Categoria removida!"),k()}catch(t){console.error(t),n.error("Erro inesperado ao remover categoria.")}},[ye,es]=c.useState([{id:1,customer:"João Silva",items:"2x X-Burger, 1x Coca-Cola",total:45,status:"pending",date:"2024-01-20 14:30",address:"Rua das Flores, 123 - Centro"},{id:2,customer:"Maria Santos",items:"1x Pizza Margherita, 1x Suco",total:52,status:"preparing",date:"2024-01-20 14:15",address:"Av. Principal, 456 - Jardim"},{id:3,customer:"Pedro Costa",items:"3x Esfiha de Carne",total:18,status:"ready",date:"2024-01-20 13:45",address:"Rua do Comércio, 789 - Vila Nova"},{id:4,customer:"Ana Oliveira",items:"1x X-Salada, 1x Batata Frita",total:38,status:"delivered",date:"2024-01-20 13:00",address:"Rua São José, 321 - Centro"}]),[ss,as]=c.useState([]),[rs,Pe]=c.useState(!1),[Se,os]=c.useState(""),[Q,ts]=c.useState("all"),_e=s=>{if(!s)return null;const a=s.toLowerCase();return a==="user"?"client":a},Ee=async()=>{var a,t,l;Pe(!0);const{data:s}=await y.auth.getSession();console.log((l=(t=(a=s.session)==null?void 0:a.user)==null?void 0:t.user_metadata)==null?void 0:l.role);try{const{data:z,error:J}=await y.from("usuario").select("*").order("nome",{ascending:!0});if(J){console.error(J),n.error("Erro ao carregar usuários.");return}const W=(z||[]).map(X=>{const Re=_e(X.role)||"client";return{...X,role:Re,isAdmin:Re==="admin"}});as(W)}catch(z){console.error(z),n.error("Erro ao carregar usuários.")}finally{Pe(!1)}},is=async(s,a)=>{if(!s){n.error("Usuário sem referência de autenticação.");return}try{const l=(_e(a)||"client")==="admin"?"client":"admin",{error:z}=await y.from("usuario").update({role:l}).eq("auth_user_id",s);if(z){console.error(z),n.error("Erro ao atualizar privilégio.");return}n.success(l==="admin"?"Usuário promovido a admin com sucesso!":"Usuário definido como cliente."),Ee()}catch(t){console.error(t),n.error("Erro inesperado ao alterar privilégios.")}},[ns,ke]=c.useState(!1),[ls,ue]=c.useState(!1),[cs,Fe]=c.useState(!1),[ds,xe]=c.useState(!1),ms=[{day:"Seg",value:250},{day:"Ter",value:380},{day:"Qua",value:420},{day:"Qui",value:310},{day:"Sex",value:580},{day:"Sáb",value:720},{day:"Dom",value:650}],Te=[{name:"Pendente",value:12,color:"hsl(var(--chart-1))"},{name:"Preparando",value:8,color:"hsl(var(--chart-2))"},{name:"Pronto",value:5,color:"hsl(var(--chart-3))"},{name:"Entregue",value:45,color:"hsl(var(--chart-4))"}],hs=[{product:"X-Burger",sales:45},{product:"Pizza",sales:38},{product:"Coca-Cola",sales:62},{product:"Esfiha",sales:28},{product:"X-Salada",sales:33}],ge={value:{label:"Vendas",color:"hsl(var(--primary))"},sales:{label:"Quantidade",color:"hsl(var(--primary))"}},us=s=>{const a={pending:{label:"Pendente",variant:"secondary"},preparing:{label:"Preparando",variant:"default"},ready:{label:"Pronto",variant:"outline"},delivered:{label:"Entregue",variant:"outline"},cancelled:{label:"Cancelado",variant:"destructive"}},{label:t,variant:l}=a[s]||a.pending;return e.jsx(ce,{variant:l,children:t})},Le=s=>{const a=i.find(t=>t.id===s);return a?a.name:"Sem categoria"},xs=(s,a)=>{es(ye.map(t=>t.id===s?{...t,status:a}:t)),n.success("Status do pedido atualizado!")},De=x.filter(s=>{var W,X;const a=G.trim().toLowerCase();if(!a)return!0;const t=(W=s.nome)==null?void 0:W.toLowerCase().includes(a),l=(X=s.descricao)==null?void 0:X.toLowerCase().includes(a),J=Le(s.categoria_id).toLowerCase().includes(a);return t||l||J}),Ae=ss.filter(s=>{const a=Se.trim().toLowerCase(),t=a===""||s.nome&&s.nome.toLowerCase().includes(a)||s.email&&s.email.toLowerCase().includes(a)||s.unidade&&s.unidade.toLowerCase().includes(a)||s.cpf&&s.cpf.toLowerCase().includes(a),l=Q==="all"||Q==="admin"&&s.role==="admin"||Q==="client"&&s.role==="client";return t&&l});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(bs,{}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Painel Administrativo"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie pedidos, produtos e categorias"})]}),e.jsxs(ws,{defaultValue:"dashboard",className:"space-y-6",children:[e.jsxs(ys,{className:"grid w-full max-w-4xl grid-cols-5",children:[e.jsxs(K,{value:"dashboard",className:"gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),"Dashboard"]}),e.jsxs(K,{value:"orders",className:"gap-2",children:[e.jsx(ze,{className:"h-4 w-4"}),"Pedidos"]}),e.jsxs(K,{value:"products",className:"gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),"Produtos"]}),e.jsxs(K,{value:"categories",className:"gap-2",children:[e.jsx(js,{className:"h-4 w-4"}),"Categorias"]}),e.jsxs(K,{value:"users",className:"gap-2",children:[e.jsx(ps,{className:"h-4 w-4"}),"Usuários"]})]}),e.jsxs(M,{value:"dashboard",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(b,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Vendas Totais"}),e.jsx(vs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"R$ 3.310,00"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+12.5%"})," em relação ao mês passado"]})]})]}),e.jsxs(b,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Pedidos"}),e.jsx(ze,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"70"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+8.2%"})," em relação à semana passada"]})]})]}),e.jsxs(b,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Produtos Ativos"}),e.jsx(qe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.filter(s=>s.disponivel).length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["de ",x.length," produtos cadastrados"]})]})]}),e.jsxs(b,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Ticket Médio"}),e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"R$ 47,29"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+5.3%"})," em relação ao mês passado"]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(b,{children:[e.jsxs(P,{children:[e.jsx(S,{children:"Vendas da Semana"}),e.jsx(q,{children:"Faturamento diário em R$"})]}),e.jsx(w,{children:e.jsx(me,{config:ge,className:"h-[300px]",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(Ss,{data:ms,children:[e.jsx(He,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Xe,{dataKey:"day",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Ke,{className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(fe,{content:e.jsx(he,{})}),e.jsx(_s,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",strokeWidth:2,dot:{fill:"hsl(var(--primary))",r:4}})]})})})})]}),e.jsxs(b,{children:[e.jsxs(P,{children:[e.jsx(S,{children:"Status dos Pedidos"}),e.jsx(q,{children:"Distribuição por status"})]}),e.jsx(w,{children:e.jsx(me,{config:ge,className:"h-[300px]",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(Es,{children:[e.jsx(ks,{data:Te,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${s}: ${(a*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:Te.map((s,a)=>e.jsx(Fs,{fill:s.color},`cell-${a}`))}),e.jsx(fe,{content:e.jsx(he,{})})]})})})})]}),e.jsxs(b,{className:"md:col-span-2",children:[e.jsxs(P,{children:[e.jsx(S,{children:"Produtos Mais Vendidos"}),e.jsx(q,{children:"Top 5 produtos do mês"})]}),e.jsx(w,{children:e.jsx(me,{config:ge,className:"h-[300px]",children:e.jsx(de,{width:"100%",height:"100%",children:e.jsxs(Ts,{data:hs,children:[e.jsx(He,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Xe,{dataKey:"product",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(Ke,{className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),e.jsx(fe,{content:e.jsx(he,{})}),e.jsx(Ls,{dataKey:"sales",fill:"hsl(var(--primary))",radius:[8,8,0,0]})]})})})})]})]})]}),e.jsx(M,{value:"orders",className:"space-y-4",children:e.jsxs(b,{children:[e.jsxs(P,{children:[e.jsx(S,{children:"Gerenciar Pedidos"}),e.jsx(q,{children:"Visualize e atualize o status dos pedidos"})]}),e.jsx(w,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(je,{children:[e.jsx(pe,{children:e.jsxs(U,{children:[e.jsx(h,{children:"ID"}),e.jsx(h,{children:"Cliente"}),e.jsx(h,{children:"Itens"}),e.jsx(h,{children:"Endereço"}),e.jsx(h,{children:"Total"}),e.jsx(h,{children:"Status"}),e.jsx(h,{children:"Data/Hora"}),e.jsx(h,{children:"Ações"})]})}),e.jsx(ve,{children:ye.map(s=>e.jsxs(U,{children:[e.jsxs(u,{className:"font-medium",children:["#",s.id]}),e.jsx(u,{children:s.customer}),e.jsx(u,{className:"max-w-xs truncate",children:s.items}),e.jsx(u,{className:"max-w-xs truncate text-muted-foreground text-sm",children:s.address}),e.jsxs(u,{className:"font-semibold",children:["R$ ",s.total.toFixed(2)]}),e.jsx(u,{children:us(s.status)}),e.jsx(u,{className:"text-sm text-muted-foreground",children:s.date}),e.jsx(u,{children:e.jsxs(Y,{value:s.status,onValueChange:a=>xs(s.id,a),children:[e.jsx(Z,{className:"w-36",children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(T,{value:"pending",children:"Pendente"}),e.jsx(T,{value:"preparing",children:"Preparando"}),e.jsx(T,{value:"ready",children:"Pronto"}),e.jsx(T,{value:"delivered",children:"Entregue"}),e.jsx(T,{value:"cancelled",children:"Cancelado"})]})]})})]},s.id))})]})})})]})}),e.jsx(M,{value:"products",className:"space-y-4",children:e.jsxs(b,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Gerenciar Produtos"}),e.jsx(q,{children:"Adicione, edite ou remova produtos do cardápio"})]}),e.jsxs(ae,{open:ns,onOpenChange:ke,children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(_,{className:"gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Adicionar Produto"]})}),e.jsx(re,{className:"max-w-md",children:e.jsxs("form",{onSubmit:m,children:[e.jsxs(oe,{children:[e.jsx(te,{children:"Novo Produto"}),e.jsx(ie,{children:"Preencha os dados do produto"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"nome",children:"Nome"}),e.jsx(v,{id:"nome",value:r.nome,onChange:d,placeholder:"Ex: X-Burger Especial"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"descricao",children:"Descrição"}),e.jsx(ne,{id:"descricao",value:r.descricao,onChange:d,placeholder:"Descreva o produto"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"preco",children:"Preço (R$)"}),e.jsx(v,{id:"preco",type:"number",step:"0.01",value:r.preco,onChange:d,placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"estoque",children:"Estoque"}),e.jsx(v,{id:"estoque",type:"number",min:"0",value:r.estoque,onChange:d,placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"categoria_id",children:"Categoria"}),e.jsxs(Y,{value:r.categoria_id?r.categoria_id.toString():"",onValueChange:s=>o(a=>({...a,categoria_id:s})),children:[e.jsx(Z,{children:e.jsx(ee,{})}),e.jsx(se,{children:i.map(s=>e.jsx(T,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"disponivel",checked:r.disponivel,onChange:s=>o(a=>({...a,disponivel:s.target.checked})),className:"w-4 h-4"}),e.jsx(g,{htmlFor:"disponivel",children:"Produto disponível"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"imagem",children:"URL da Imagem"}),e.jsx(v,{id:"imagem",value:r.imagem,onChange:d,placeholder:"https://..."})]})]}),e.jsx(le,{children:e.jsx(_,{type:"submit",className:"w-full mt-4",children:"Adicionar Produto"})})]})})]})]}),e.jsxs(w,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative w-full sm:max-w-xs",children:[e.jsx(Ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Buscar por nome, descrição ou categoria...",value:G,onChange:s=>O(s.target.value),className:"pl-10"})]})}),N?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando produtos..."}):x.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum produto cadastrado."}):De.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum produto encontrado para a busca."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(je,{children:[e.jsx(pe,{children:e.jsxs(U,{children:[e.jsx(h,{children:"Imagem"}),e.jsx(h,{children:"Nome"}),e.jsx(h,{children:"Descrição"}),e.jsx(h,{children:"Preço"}),e.jsx(h,{children:"Categoria"}),e.jsx(h,{children:"Status"}),e.jsx(h,{children:"Ações"})]})}),e.jsx(ve,{children:De.map(s=>e.jsxs(U,{children:[e.jsx(u,{children:e.jsx("img",{src:s.imagem,alt:s.nome,className:"w-16 h-16 object-cover rounded"})}),e.jsx(u,{className:"font-medium",children:s.nome}),e.jsx(u,{className:"max-w-xs truncate text-muted-foreground text-sm",children:s.descricao}),e.jsxs(u,{className:"font-semibold",children:["R$ ",s.preco.toFixed(2)]}),e.jsx(u,{children:Le(s.categoria_id)}),e.jsx(u,{children:e.jsx(ce,{variant:s.disponivel?"outline":"secondary",children:s.disponivel?"Disponível":"Indisponível"})}),e.jsx(u,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{variant:"outline",size:"icon",onClick:()=>L(s),children:e.jsx($e,{className:"h-4 w-4"})}),e.jsx(_,{variant:"outline",size:"icon",onClick:()=>f(s.id),children:e.jsx(Oe,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})]})}),e.jsx(M,{value:"categories",className:"space-y-4",children:e.jsxs(b,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0",children:[e.jsxs("div",{children:[e.jsx(S,{children:"Gerenciar Categorias"}),e.jsx(q,{children:"Adicione, edite ou remova categorias de produtos"})]}),e.jsxs(ae,{open:cs,onOpenChange:Fe,children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(_,{className:"gap-2",children:[e.jsx(Ie,{className:"h-4 w-4"}),"Adicionar Categoria"]})}),e.jsx(re,{className:"max-w-md",children:e.jsxs("form",{onSubmit:Qe,children:[e.jsxs(oe,{children:[e.jsx(te,{children:"Nova Categoria"}),e.jsx(ie,{children:"Preencha os dados da categoria"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"nameCategorias",children:"Nome"}),e.jsx(v,{id:"nameCategorias",value:C.nameCategorias,onChange:A,placeholder:"Ex: Lanches"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"descricaoCategorias",children:"Descrição"}),e.jsx(ne,{id:"descricaoCategorias",value:C.descricaoCategorias,onChange:A,placeholder:"Descreva a categoria"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"urlImagemCategorias",children:"URL da Imagem"}),e.jsx(v,{id:"urlImagemCategorias",value:C.urlImagemCategorias,onChange:A,placeholder:"https://..."})]})]}),e.jsx(le,{children:e.jsx(_,{type:"submit",className:"w-full mt-4",children:"Adicionar Categoria"})})]})})]})]}),e.jsx(w,{children:R?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando categorias..."}):i.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma categoria cadastrada."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(s=>e.jsxs(b,{className:"overflow-hidden",children:[e.jsx("div",{className:"aspect-video relative",children:e.jsx("img",{src:s.image_url,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs(w,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>Ye(s),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Editar"]}),e.jsx(_,{variant:"outline",size:"sm",onClick:()=>Ze(s.id),children:e.jsx(Oe,{className:"h-4 w-4"})})]})]})]},s.id))})})]})}),e.jsx(M,{value:"users",className:"space-y-4",children:e.jsxs(b,{children:[e.jsxs(P,{children:[e.jsx(S,{children:"Gerenciar Usuários"}),e.jsx(q,{children:"Promova ou remova privilégios de administrador"})]}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Buscar por nome, e-mail ou unidade...",value:Se,onChange:s=>os(s.target.value),className:"pl-10"})]}),e.jsxs(Y,{value:Q,onValueChange:ts,children:[e.jsx(Z,{className:"w-full sm:w-[180px]",children:e.jsx(ee,{placeholder:"Filtrar por role"})}),e.jsxs(se,{children:[e.jsx(T,{value:"all",children:"Todos"}),e.jsx(T,{value:"admin",children:"Apenas Admins"}),e.jsx(T,{value:"client",children:"Apenas Clientes"})]})]})]}),rs?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando usuários..."}):Ae.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum usuário encontrado."}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(je,{children:[e.jsx(pe,{children:e.jsxs(U,{children:[e.jsx(h,{children:"Nome"}),e.jsx(h,{children:"Email"}),e.jsx(h,{children:"Unidade"}),e.jsx(h,{children:"CPF"}),e.jsx(h,{children:"Status"}),e.jsx(h,{className:"text-right",children:"Ações"})]})}),e.jsx(ve,{children:Ae.map(s=>e.jsxs(U,{children:[e.jsx(u,{className:"font-medium",children:s.nome}),e.jsx(u,{children:s.email}),e.jsx(u,{className:"max-w-xs truncate",children:s.unidade||"Não informado"}),e.jsx(u,{children:s.cpf||"Não informado"}),e.jsx(u,{children:s.role==="admin"?e.jsxs(ce,{variant:"default",className:"gap-1",children:[e.jsx(Be,{className:"h-3 w-3"}),"Admin"]}):e.jsxs(ce,{variant:"secondary",className:"gap-1",children:[e.jsx(Ns,{className:"h-3 w-3"}),"Cliente"]})}),e.jsx(u,{className:"text-right",children:e.jsx(_,{variant:s.role==="admin"?"destructive":"default",size:"sm",onClick:()=>is(s.auth_user_id,s.role),className:"gap-2",children:s.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"h-4 w-4"}),"Remover Admin"]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-4 w-4"}),"Promover a Admin"]})})})]},s.id))})]})})]})]})})]}),e.jsx(ae,{open:ls,onOpenChange:ue,children:e.jsxs(re,{className:"max-w-md",children:[e.jsxs(oe,{children:[e.jsx(te,{children:"Editar Produto"}),e.jsx(ie,{children:"Atualize os dados do produto"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"edit-nome",children:"Nome"}),e.jsx(v,{id:"edit-nome",value:r.nome,onChange:s=>o({...r,nome:s.target.value}),placeholder:"Ex: X-Burger Especial"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"edit-descricao",children:"Descrição"}),e.jsx(ne,{id:"edit-descricao",value:r.descricao,onChange:s=>o({...r,descricao:s.target.value}),placeholder:"Descreva o produto"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"edit-preco",children:"Preço (R$)"}),e.jsx(v,{id:"edit-preco",type:"number",step:"0.01",value:r.preco,onChange:s=>o({...r,preco:s.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"edit-estoque",children:"Estoque"}),e.jsx(v,{id:"edit-estoque",type:"number",min:"0",value:r.estoque,onChange:s=>o({...r,estoque:s.target.value}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"edit-categoria",children:"Categoria"}),e.jsxs(Y,{value:r.categoria_id?r.categoria_id.toString():"",onValueChange:s=>o({...r,categoria_id:s}),children:[e.jsx(Z,{children:e.jsx(ee,{})}),e.jsx(se,{children:i.map(s=>e.jsx(T,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"edit-imagem",children:"URL da Imagem"}),e.jsx(v,{id:"edit-imagem",value:r.imagem,onChange:s=>o({...r,imagem:s.target.value}),placeholder:"https://..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"edit-disponivel",checked:r.disponivel,onChange:s=>o({...r,disponivel:s.target.checked}),className:"w-4 h-4"}),e.jsx(g,{htmlFor:"edit-disponivel",className:"cursor-pointer",children:"Produto disponível"})]})]}),e.jsx(le,{children:e.jsx(_,{onClick:j,className:"w-full",children:"Salvar Alterações"})})]})}),e.jsx(ae,{open:ds,onOpenChange:xe,children:e.jsxs(re,{className:"max-w-md",children:[e.jsxs(oe,{children:[e.jsx(te,{children:"Editar Categoria"}),e.jsx(ie,{children:"Atualize os dados da categoria"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"edit-cat-name",children:"Nome"}),e.jsx(v,{id:"edit-cat-name",value:F.name,onChange:s=>H({...F,name:s.target.value}),placeholder:"Ex: Lanches"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"edit-cat-description",children:"Descrição"}),e.jsx(ne,{id:"edit-cat-description",value:F.description,onChange:s=>H({...F,description:s.target.value}),placeholder:"Descreva a categoria"})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"edit-cat-image",children:"URL da Imagem"}),e.jsx(v,{id:"edit-cat-image",value:F.image_url,onChange:s=>H({...F,image_url:s.target.value}),placeholder:"https://..."})]})]}),e.jsx(le,{children:e.jsx(_,{onClick:We,className:"w-full",children:"Salvar Alterações"})})]})})]})]})};export{Qs as default};
