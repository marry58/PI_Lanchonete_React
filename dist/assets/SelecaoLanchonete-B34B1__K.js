import{aB as b,r,ad as e,bb as g,b4 as j,b6 as N,aC as w}from"./vendor-WvxInmkI.js";import{C as o,c as i,d,e as x,a as v,B as y,s as C}from"./index-BInAVXNB.js";import{b as L}from"./logoprincipal-CGgvGNiW.js";import"./supabase-DuVauSO6.js";import"./radix-BvlS9Eci.js";import"./react-query-D1LWqImO.js";const B=()=>{const m=b(),[n,f]=r.useState([]),[h,a]=r.useState(!0);r.useEffect(()=>{(async()=>{a(!0);const{data:t,error:c}=await C.from("lanchonete").select("id, nome_lanchonete, endereco, horario, status, telefone").order("nome_lanchonete",{ascending:!0});if(c){console.error("Erro ao carregar lanchonetes:",c),w.error("Não foi possível carregar as lanchonetes."),a(!1);return}const u=(t||[]).filter(p=>p.status!==!1);f(u),a(!1)})()},[]);const l=s=>{localStorage.setItem("lanchonete_selecionada",s),typeof window<"u"&&window.dispatchEvent(new Event("lanchonete_change")),m("/lanchonete")};return e.jsxs("main",{className:"fixed inset-0 bg-[#ffffff8c] overflow-hidden w-full h-full flex items-center justify-center",style:{backgroundImage:`url(${L})`,backgroundSize:"cover",backgroundPosition:"top"},"aria-label":"Seleção de lanchonete",children:[e.jsx("div",{className:"absolute inset-0 bg-white/60"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-8 w-full h-full justify-center px-4",children:[e.jsx("img",{src:"/src/assets/img/headerPrincipal.png",alt:"Fecomércio PR logo",className:"w-[544px] h-[118px] object-contain absolute top-12 left-1/2 -translate-x-1/2 max-w-[90%]"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-[#0b4d8b] mb-2",children:"Escolha sua Lanchonete"}),e.jsx("p",{className:"text-lg text-gray-700",children:"Selecione a unidade mais próxima de você"})]}),e.jsx("div",{className:"flex flex-col md:flex-row gap-6 items-center justify-center w-full max-w-4xl",children:h?e.jsxs("div",{className:"flex flex-col items-center text-center text-gray-600 py-10",children:[e.jsx(g,{className:"h-10 w-10 animate-spin mb-3"}),e.jsx("p",{children:"Carregando unidades..."})]}):n.length===0?e.jsx(o,{className:"w-full md:w-[400px] text-center p-6",children:e.jsxs(i,{children:[e.jsx(d,{className:"text-xl",children:"Nenhuma unidade disponível"}),e.jsx(x,{children:"Tente novamente mais tarde ou entre em contato com o suporte."})]})}):n.map(s=>e.jsxs(o,{className:"w-full md:w-[400px] hover:shadow-xl transition-all duration-300 cursor-pointer border-2 hover:border-[#ff8a00]",onClick:()=>l(s.id),children:[e.jsxs(i,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-[#0b4d8b] rounded-full flex items-center justify-center",children:e.jsx(j,{className:"w-8 h-8 text-white"})}),e.jsx(d,{className:"text-2xl text-[#0b4d8b]",children:s.nome_lanchonete}),e.jsx(x,{className:"text-base",children:s.descricao||"Unidade disponível"})]}),e.jsxs(v,{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600 mb-4",children:[e.jsx(N,{className:"w-8 h-8"}),e.jsxs("span",{className:"text-sm",children:[" ",s.endereco]})]}),s.horario&&e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Horário: ",s.horario]}),s.telefone&&e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Telefone: ",s.telefone]}),e.jsx(y,{className:"w-full bg-[#0b4d8b] hover:bg-[#0b4d8b]/90 text-white",onClick:t=>{t.stopPropagation(),l(s.id)},children:e.jsx("span",{className:"text-[#ff8a00] font-semibold text-lg",children:"SELECIONAR"})})]})]},s.id))})]})]})};export{B as default};
